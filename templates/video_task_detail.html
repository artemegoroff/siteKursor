{% extends "base.html" %}
{% load staticfiles %}
{% block seo_block %}
    <title>{{ number_task.seo_title }}</title>
    <meta name="description" content=" {{ video.seo_description }}">
    <meta name="keywords" content="{{ video.seo_keywords }}">
{% endblock %}

{% block extracss %}
    <link rel="stylesheet/less" href="{% static 'css_base/video_task_detail.less' %}" type="text/less">
    <link rel="stylesheet/less" href="{% static 'css_base/mediaTasksDetail.less' %}" type="text/less">
    {% if vopros.code_python or 'language-' in vopros.text%}
        <link rel="stylesheet" href="{% static 'css_base/prism.css' %}">
        <script src="{% static 'js_base/prism.js' %}"></script>
    {% endif %}
{% endblock %}



{% block content %}


    <div class="container-fluid block-video-detail">

        <div class="row">
            {#            <div class="col-sm-2 col-md-2 numberTask">#}
            {#               menu side#}
            {#            </div>#}

            <div class="col-md-offset-2 col-md-8">

                {% if '127.0.0.1' in request.META.HTTP_HOST %}
                    <div class="abs_spanRedact">
                        {% if 'ege' in request.path %}
                            <a href="http://127.0.0.1:8000/admin/ege/videorazborege/{{ video.id }}/change/"
                               target="_blank" class="btn btn-info"
                               role="button">Редактировать
                            </a>
                        {% elif 'oge' in request.path %}
                            <a href="http://127.0.0.1:8000/admin/oge/videorazboroge/{{ video.id }}/change/"
                               target="_blank" class="btn btn-info"
                               role="button">Редактировать
                            </a>
                        {% endif %}
                    </div>
                {% endif %}


                <h2> Разбор задачи № {{ vopros.number_of_task }}</h2>

                <div class="videoContainer">
                    <!-- THE YOUTUBE PLAYER -->
                    {#                    <div class="vid-container">#}
                    <div class="embed-responsive embed-responsive-16by9">
                        <iframe id="vid_frame" class="embed-responsive-item"
                                src="http://youtube.com/embed/{{ video.url_video }}?autoplay=1&amp;rel=0&amp;showinfo=0&amp;autohide=1"
                                frameborder="0" width="854" height="480" allowfullscreen></iframe>
                    </div>

                    <!-- THE PLAYLIST -->
                    <!-- Идея взята -->
                    <!--http://woosterwebdesign.com/responsive-youtube-player-with-playlist/-->
                    <h3 style="margin-top: 10px;border-bottom: 2px solid;border-top: 2px solid"> Теория по задаче</h3>
                    <div class="vid-list-container">
                        <div class="vid-list">

                            <div class="vid-item"
                                 onclick="document.getElementById('vid_frame').src='http://youtube.com/embed/{{ video.url_video }}?autoplay=1&amp;rel=0&amp;showinfo=0&amp;autohide=1'">
                                <div class="thumb"><img src="http://i4.ytimg.com/vi/{{ video.url_video }}/default.jpg">
                                </div>
                                <div class="desc">Разбор текущей задачи</div>
                            </div>
                            {% if video.treoryKnowledge %}
                                {% for elem in video.treoryKnowledge.all %}
                                    <div class="vid-item"
                                         onclick="document.getElementById('vid_frame').src='http://youtube.com/embed/{{ elem.url_video }}?autoplay=1&amp;rel=0&amp;showinfo=0&amp;autohide=1'">
                                        <div class="thumb"><img
                                                src="http://img.youtube.com/vi/{{ elem.url_video }}/0.jpg">
                                        </div>
                                        <div class="desc">{{ elem.name }}</div>
                                    </div>
                                {% endfor %}


                            {% endif %}

                        </div>
                    </div>

                    <!-- LEFT AND RIGHT ARROWS -->
                    <div class="arrows">
                        <div class="arrow-left"><i class="fa fa-chevron-left fa-lg"></i></div>
                        <div class="arrow-right"><i class="fa fa-chevron-right fa-lg"></i></div>
                    </div>

                </div>


                <script src="https://apis.google.com/js/platform.js"></script>

                <div class="g-ytsubscribe" data-channelid="UCMcC_43zGHttf9bY-xJOTwA" data-layout="default"
                     data-count="hidden"></div>

                <h3>Условие задачи</h3>
                <div class="well well-sm">

                    {#    Проверка на наличие картинки     #}
                    {% if vopros.picture %}
                        <img src="{{ vopros.picture.url }}" class="img-rounded img-responsive"
                             style="float: right">
                    {% endif %}
                    {#    Проверка на наличие картинки     #}

                    {#начало вопроса#}
                    {% for part in vopros.get_part_question_1 %}
                        <p class="text-justify ">
                            {% if forloop.first %}
                                {{ vopros.id }})
                            {% endif %}
                            {{ part|safe }}
                        </p>
                    {% endfor %}

                    {#    Проверка на наличие таблицы     #}
                    {% if vopros.table_data %}
                        <div class="row">
                            {% for table in vopros.table_in_row %}
                                <div class="col-md-offset-1 col-md-4">
                                    <table class="table table-condensed table-bordered table-responsive table-striped">
                                        {% for rows in table %}

                                            {% if forloop.first %}
                                                <thead>
                                                <tr>
                                                    {% for row in rows %}
                                                        <th> {% if row == "x" %} &nbsp;&nbsp;
                                                            &nbsp;{% else %}{{ row }}{% endif %}</th>
                                                    {% endfor %}
                                                </tr>
                                                </thead>
                                            {% else %}

                                                {% if forloop.counter == 2 %}
                                                    <tbody>
                                                {% endif %}
                                            <tr>
                                                {% for row in rows %}
                                                    {% if row %}
                                                        <td> {% if row == "x" %} &nbsp;&nbsp;
                                                            &nbsp;{% else %}{{ row }}{% endif %} </td>
                                                    {% endif %}
                                                {% endfor %}
                                            </tr>
                                            {% if forloop.last %}
                                                </tbody>
                                            {% endif %}
                                            {% endif %}

                                        {% endfor %}
                                    </table>
                                </div>
                            {% endfor %}
                        </div>
                    {% endif %}
                    {#    Проверка на наличие таблицы     #}

                    {#    Проверка на наличие кода     #}
                    {% if vopros.code_python %}
                        <div class="row blockcode">
                            <div class="col-md-4">
                                <pre><code class="language-python">{{ vopros.code_python }}</code></pre>
                            </div>
                            <div class="col-md-4">
                                <pre><code class="language-pascal">{{ vopros.code_pascal }}</code></pre>
                            </div>
                            <div class="col-md-4">
                                <pre><code class="language-cpp">{{ vopros.code_c_plus }}</code></pre>
                            </div>
                        </div>
                    {% endif %}
                    {#    Проверка на наличие кода     #}

                    {#    Футер вопроса     #}

                    {% for part in vopros.get_part_question_2 %}
                        {% if vopros.picture %}
                            <p class="text-justify" style="float: left"> {{ part|safe }}</p>
                        {% else %}
                            <p class="text-justify "> {{ part|safe }}</p>
                        {% endif %}
                    {% endfor %}

                    {#    Футер вопроса     #}
                    {% if vopros.picture %}
                        <div class="clearfix">
                    {% endif %}

                    {#    Проверка на наличие картинки   Закрываем блок clearfix  #}
                    {% if vopros.picture %}
                        </div>
                    {% endif %}
                    {#    Проверка на наличие картинки     #}
                </div>


                {#Комменты Вконтакте#}
                <!-- Put this script tag to the <head> of your page -->
                <script type="text/javascript" src="//vk.com/js/api/openapi.js?152"></script>

                <script type="text/javascript">
                    VK.init({apiId: 6204845, onlyWidgets: true});
                </script>

                <!-- Put this div tag to the place, where the Comments block will be -->
                <div id="vk_comments"></div>
                <script type="text/javascript">
                    VK.Widgets.Comments("vk_comments", {limit: 10, attach: "*"});
                </script>
                {#Комменты Вконтакте#}
            </div>
        </div>
    </div>


    <script type="text/javascript">
        $(function () {
            $('.list-group a').each(function () {
                var location = window.location.href;
                var link = this.href;
                {#в случае get запроса нужно получить короткий путь#}
                if (location.indexOf('category') >= 0) {
                    var index = location.indexOf('category');
                    location = location.substr(0, index - 1);
                }
                if (location.length == link.length && location.indexOf(link) == 0) {
                    $(this).addClass('active');
                }
            });
        });
    </script>

    <script>
        $(document).ready(function () {
            $(".arrow-right").bind("click", function (event) {
                event.preventDefault();
                $(".vid-list-container").stop().animate({
                    scrollLeft: "+=336"
                }, 750);
            });
            $(".arrow-left").bind("click", function (event) {
                event.preventDefault();
                $(".vid-list-container").stop().animate({
                    scrollLeft: "-=336"
                }, 750);
            });
        });
    </script>

{% endblock %}